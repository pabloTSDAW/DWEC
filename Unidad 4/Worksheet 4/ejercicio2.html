<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Ejercicio 2</title>
  <style type="text/css">

  </style>
</head>

<body>

  <div><input id="nom" type="text"></div></br>
  <button id="boton" onclick="crearCookie(event)">Entrar</button>
  <button id="boton2" onclick="salirSesion(event)" style="visibility: hidden;">Salir</button>
  <p id="saludo" style="visibility: hidden;">Bienvenido, es un placer contar contigo</p>

  <script type="text/javascript">

    /*2) Mejora el ejercicio anterior dando al usuario las opciones para que pueda
    configurar el color de fondo, de párrafo y el tamaño de la letra.*/


    var nombre;
    var nommbre2;
    var salir = document.getElementById('boton2');
    var saludo = document.getElementById('saludo');

      function crearCookie(event) {
        if (document.cookie == '') {
          nombre = document.getElementById('nom').value;
          nommbre2 = nombre;
          var bgcolor = prompt('Elige un color de fondo');
          var color = prompt('Elige el color de letra');
          var fuente = prompt('Elige el tamaño de fuente: small, medium, large');
          configurarVentana(bgcolor, color, fuente);
          document.cookie = 'username='+nombre+';path=/;max-age=1000; bgcolor=' + bgcolor + ';color='+color+';fuente='+fuente+';';
          alert('Bienvenido ' + nombre);
          salir.style.visibility = 'visible';
          saludo.style.visibility = 'visible';
        } else {
          nombre = document.getElementById('nom').value;
            if (nommbre2 == nombre){
              alert('Hola '+nombre+', como sigues?');
            } else {
              alert('Usuario no identificado');
            }
        }
      }

      function salirSesion(event){
          document.cookie = 'username='+nombre+';expires=Thu, 01 Jan 1970 00:00:00 UTC";path=/;';
          salir.style.visibility = 'hidden';
          alert('Usuario desconectado');
          document.body.style.backgroundColor = "white";
          saludo.style.color = "black";
          saludo.style.fontWeight = "medium";
          saludo.style.visibility = 'hidden';
      }

      function configurarVentana(bgcolor, color, fuente){
        document.body.style.backgroundColor = String(bgcolor);
        saludo.style.color = String(color);
        saludo.style.fontSize = String(fuente);
      }


      /*3) ¿Cómo podemos hacer que la segunda cookie se borre automáticamente al cerrar el navegador? Compruébalo.*/
      //Para ello hay que quitar el atributo expires.

  </script>

</body>

</html>
